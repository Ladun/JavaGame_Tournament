package com.ladun.game.objects;

import com.ladun.game.GameManager;
import com.ladun.game.Scene.GameScene;

public abstract class Entity extends GameObject{
	
	protected GameScene gs;
	protected float maxHealth;
	protected float health;
	protected float speed;
	protected float jump;
	protected float fallDistance;
	
	protected float groundHeight; // 오브젝트가 서있는 땅의 높이
	
	protected int tileX,tileZ;
	protected float offX,offZ;
	
	protected boolean ground = false;
	protected boolean groundLast = false;
	protected boolean moving = false;
	
	protected float nextHitTime = 0;
	
	public void Hit(float damage) {
		health -= damage;
		gs.addObject(new DisplayDamage(damage, posX, posY));
		if(health <= 0) {
			active =false;
		}
	}
	
	protected void AdjustPosition()
	{
		//Final position
		if(offZ > GameManager.TS / 2)
		{
			tileZ++;
			offZ -= GameManager.TS;
		}
		if(offZ <  -GameManager.TS / 2)
		{
			tileZ--;
			offZ += GameManager.TS;
		}
		
		if(offX > GameManager.TS / 2)
		{
			tileX++;
			offX -= GameManager.TS;
		}
		if(offX <  -GameManager.TS / 2)
		{
			tileX--;
			offX += GameManager.TS;
		}
		//--

		posX = tileX * GameManager.TS + offX;
		posZ = tileZ * GameManager.TS + offZ;
	}

	public float getCenterX() {
		return posX + pL + (width - pL - pR) / 2;
	}
	public float getCenterZ() {
		return posZ + pT + (height - pT - pB) / 2;		
	}
}
