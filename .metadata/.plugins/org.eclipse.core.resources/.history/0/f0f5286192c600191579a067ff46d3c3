package com.ladun.game.objects.UI;

import com.ladun.engine.GameContainer;
import com.ladun.engine.Renderer;
import com.ladun.engine.gfx.Image;
import com.ladun.engine.gfx.ImageTile;
import com.ladun.game.objects.GameObject;

public class Slider{
	
	private int			preMousePosX = 0;

	private int posX;
	private int posY;
	private int width;
	private int height;
	
	private int backgroundColor;	
	private Button 		slider;
	
	public Slider( int x, int y,
			int width, int height,int sliderWidth,float percent,
			int sliderColor, int backgroundColor)
	{
		this.width 				= width;
		this.height 			= height;
		this.posX				= x;
		this.posY				= y;
		this.slider 			= new Button( x + (width - sliderWidth) * percent , y, sliderColor);
	}

	public void update(GameContainer gc, float dt) {
		slider.update(gc, dt);
		
		if(slider.isPressed())
		{
			int p = (gc.getInput().getMouseX() - preMousePosX);
			if(InSlider(slider.getPosX() + p))
			{
				slider.setPosX(slider.getPosX() + p);
			}
			else {
				if(slider.getPosX() < posX)
				{
					slider.setPosX(posX);
				}
				else if(slider.getPosX() > posX + width - slider.getWidth())
				{
					slider.setPosX(posX + width - slider.getWidth());
				}
			}
		}
		preMousePosX = gc.getInput().getMouseX();
	}


	public void render(GameContainer gc, Renderer r) {		
		r.drawFillRect(posX, posY, width, height, 0, backgroundColor);
		slider.render(gc, r);
	}
	
	public float getPercent()
	{
		return (slider.getPosX() - posX)/(width - slider.getWidth());
	}
	
	public boolean isPressed()
	{
		return slider.isPressed();
	}

	boolean InSlider(float x)
	{
		return x >= posX & x <= posX + width - slider.getWidth(); 
	}
}
